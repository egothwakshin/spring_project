<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="shop_source">

<select id="category_select" resultType="category_dao">
select * from category order by cidx desc
</select>

<insert id="category_insert">
insert into category values ('0',#{category_code},#{main_menu_code},#{main_menu_name},#{category_use})
</insert>


<select id="product_select" resultType="product_dao">
select * from product_registration order by product_id desc;
</select>

<insert id="product_insert">
insert into product_registration values ('0',#{category_pd},#{product_code},#{product_name},#{product_description},
#{sale_price},#{discount_rate},#{discount_price},#{stock_quantity},#{sale_status},#{early_end},#{main_image},
#{additional_image1},#{additional_image2},#{detailed_description})
</insert>

<select id="siteinfo_onedata" resultType="sitesettings_dao">
select * from site_settings order by sidx desc limit 1;
</select>


<insert id="siteinfo_insert">
insert into site_settings (sidx,homepage_title,admin_email,point_use,initial_point,
membership_level,company_name,business_number,ceo_name,representative_phone,mail_order_number,
additional_business_number,company_zipcode,company_address,info_manager_name,info_manager_email,
bank_name,bank_account,credit_card_use,mobile_payment_use,book_coupon_payment_use,min_payment_point,
max_payment_point,offline_payment_use,delivery_company_name,delivery_cost,desired_delivery_date_use)
values ('0',#{homepage_title},#{admin_email},#{point_use},#{initial_point},
#{membership_level},#{company_name},#{business_number},#{ceo_name},#{representative_phone},#{mail_order_number},
#{additional_business_number},#{company_zipcode},#{company_address},#{info_manager_name},#{info_manager_email},
#{bank_name},#{bank_account},#{credit_card_use},#{mobile_payment_use},#{book_coupon_payment_use},#{min_payment_point},
#{max_payment_point},#{offline_payment_use},#{delivery_company_name},#{delivery_cost},#{desired_delivery_date_use})
</insert>

<!--관리자 (admin)-->
<update id="update_approve" parameterType="map">
update add_master set ad_approve=
<choose>
	<when test='approve=="N"'>
		'Y'
	</when>
	<when test='approve=="Y"'>
		'N'
	</when>
	<otherwise>
     	ad_approve
    </otherwise>
</choose>
where aidx=#{adix}
</update>

<select id="search_ad" resultType="addmaster_dao">
select * from add_master where ad_id=#{ad_id} and ad_pw=#{ad_pw}
</select>

<select id="select_master" resultType="addmaster_dao">
select * from add_master order by aidx desc
</select>

<insert id="insert_master">
insert into add_master (aidx,ad_id,ad_pw,ad_name,ad_email,ad_tel1,ad_tel2,ad_tel3,ad_department,ad_position,ad_approve,adate)
values ('0',#{ad_id},#{ad_pw},#{ad_name},#{ad_email},#{ad_tel1},#{ad_tel2},#{ad_tel3},#{ad_department},#{ad_position},#{ad_approve},now())
</insert>

<select id="duplicate_id" resultType="int">
select count(*) from add_master where ad_id=#{ad_id}
</select>
</mapper>